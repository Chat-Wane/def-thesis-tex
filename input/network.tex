\section{Un protocole d'échantillonnage aléatoire adaptatif}

\begin{frame}{Communication}{Contexte Web}

  \large
  \begin{itemize}
  \item [$\Rightarrow$] \textbf{Le protocole de construction du réseau doit
      pouvoir supporter un nombre fluctuant d'utilisateurs ET les standards des
      navigateurs Web.}
  \end{itemize}

  \vspace{1cm}

  \begin{center}
    \includegraphics[width=0.2\textwidth]{img/webrtc.png}
  \end{center}

\end{frame}


\begin{frame}{Communication}{État de l'art}

  \begin{center}
    \begin{table}[H]
      \input{img/tablenetwork.tex}
    \end{table}
  \end{center}
  \begin{center}
    \includegraphics[width=0.65\textwidth]{img/network/motivation.eps}
  \end{center}

\end{frame}


\begin{frame}{Communication}{Définition du problème}

\begin{block}{Un protocole d'échantillonnage adaptatif}
  Soit $t$ une unité de temps arbitraire, soit $\mathcal{N}^t$ l'ensemble des
  membres non-byzantins du réseau à un instant $t$ et soit $P_i^t$ la vue
  partielle du nœud $n_i \in \mathcal{N}^t$. Un protocole d'échantillonnage
  aléatoire de pairs efficace doit assurer les propriétés suivantes :
  \begin{enumerate}
  \item Taille des vues partielles : \hfill $\forall n_i \in \mathcal{N}^t$,
    $|P_i^t| \approx \mathcal{O}(\ln |\mathcal{N}^t|)$
  \item Établissement de connexion : \hfill $\mathcal{O}(1)$
  \end{enumerate}
\end{block}

\begin{itemize}
\item [$\rightarrow$] Les vues partielles reflètent les besoins du réseau;
\item [$\rightarrow$] Limiter le nombre de sauts pour établir une connexion.
\end{itemize}

\end{frame}


\begin{frame}{Communication}{\SPRAY}

  \SPRAY :
  \begin{itemize}
  \item Protocole d'échantillonnage aléatoire de pairs;
    \vspace{0.25cm}
  \item Invariant : nombre de connexions
    $\approx |\mathcal{N}| \log |\mathcal{N}|$, sans connaissance globale, i.e.,
    $|\mathcal{N}|$ n'est connu de personne.
    \vspace{0.25cm}
  \item Établissement de connexions de proche en proche.
  \end{itemize}
    
  \vspace{1cm}

  Le réseau est \textbf{dynamique} : à n'importe quel moment, un pair peut
  rejoindre ou quitter le réseau. \\
  
  \vspace{1cm}

  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figcycleA.tex}
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figcycleB.tex}\\
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figcycleC.tex}
    \end{center}
  \end{minipage}

  \vspace{0.15cm}

  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \small Ajoute $1+\log |\mathcal{N}|$ connexions
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      % nothing
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \small Retire $1+\log |\mathcal{N}|$ connexions
    \end{center}
  \end{minipage}

\end{frame}


\begin{frame}{Communication}{Rejoindre le réseau}

  L'entrée d'un nouveau pair s'accompagne de $1+ \log {|\mathcal{N}|}$
  connexions.

  \vspace{0.5cm}
  
  \begin{itemize}
  \item \textbf{1 :} Le pair entrant se connecte à son contact;
  \item $\pmb{\log |\mathcal{N}|}$: On suppose que le protocole répond au
    problème et chaque pair possède une taille de vue partielle
    $\approx \log |\mathcal{N}|$.
  \end{itemize}

  \vspace{1cm}

  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figjoiningexampleA.tex}
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figjoiningexampleB.tex}
    \end{center}
  \end{minipage}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figjoiningexampleC.tex}
    \end{center}
  \end{minipage}

  \vspace{1cm}
  
  \large
  \begin{itemize}
  \item [$\Rightarrow$] \textbf{Les vues partielles sont déséquilibrées}
  \end{itemize}

\end{frame}


\begin{frame}{Communication}{Échanges périodiques}
 
  Le nombre de connexions reste \textbf{constant}.
 
  \vspace{0.5cm}

  Les deux pairs impliqués dans l'échange périodique donne la \textbf{moitié} de
  leur vue partielle. Les pairs sont choisis \textbf{aléatoirement}.
  \begin{itemize}
  \item [$\rightarrow$] La taille des vues converge vers la \textbf{moyenne} des
    deux.
  \end{itemize}
  

  \vspace{0.5cm}\hspace{-1cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figshuffleexampleA.tex}
    \end{center}
  \end{minipage}
  \hspace{0.35cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figshuffleexampleB.tex}
    \end{center}
  \end{minipage}
  \hspace{0.35cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figshuffleexampleC.tex}
    \end{center}
  \end{minipage}

  \vspace{0.5cm}
  \large
  \begin{itemize}
  \item [$\Rightarrow$] \textbf{Équilibre rapidement la taille des vues
      partielles;}
  \item [$\Rightarrow$] \textbf{Disperse les groupes fortement connectés.}
  \end{itemize}
  
\end{frame}

\begin{frame}{Communication}{Quitter le réseau}

  Le départ d'un pair doit engendrer la suppression de $1+\log|\mathcal{N}|$ connexions.

  \vspace{0.5cm}

  Problème : la vue sortante + la vue entrante $\approx 2\log|\mathcal{N}|$
  \begin{itemize}
  \item $\pmb{\log|\mathcal{N}|}$ : La vue partielle du pair quittant le réseau;
  \item \textbf{1} : Un parmi les $\approx \log|\mathcal{N}|$ pairs détectant
    le départ ne recrée pas de connexion.
  \end{itemize}

  \vspace{0.5cm}\hspace{-1cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figleavingexampleA.tex}
    \end{center}
  \end{minipage}
  \hspace{0.45cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figleavingexampleB.tex}
    \end{center}
  \end{minipage}
  \hspace{0.45cm}
  \begin{minipage}{0.32\textwidth}
    \begin{center}
      \input{img/figleavingexampleC.tex}
    \end{center}
  \end{minipage}

  \vspace{1cm}
  \large
  \begin{itemize}
  \item [$\Rightarrow$] \textbf{Présence de doublons assure la cohérence du
      nombre de connexions.}
  \end{itemize}
 
\end{frame}


\begin{frame}{Communication}{Expérimentations}

  Simulations \PEERSIM.
  
  \vspace{0.5cm}

  Résultats attendus :
  \begin{itemize}
  \item Convergence rapide vers un réseau possédant des propriétés similaires à
    celles des graphes aléatoires;
  \item Les doublons sont peu nombreux et n'impactent pas significativement les
    propriétés du réseau;
  \item Les protocoles basés sur \SPRAY bénéficient de son adaptativité.
  \end{itemize}

\end{frame}


\begin{frame}{Communication}{Problème d'établissement de connexions}

  \begin{center}
    \includegraphics[width=1\textwidth]{img/network/degen.eps}
  \end{center}

\end{frame}


\begin{frame}{Communication}{Les vues partielles s'adaptent}

  \begin{center}
    \begin{tikzpicture}
    \draw(0pt,0pt) node{\includegraphics[width=1\textwidth]{img/network/avgpv.eps}};
    \draw(-130pt, 0pt) node{$250$};
    \draw(-95pt,  0pt) node{$+250$};
    \draw(-60pt,  0pt) node{$+250$};
    \draw(-30pt,  0pt) node{$+250$};
    \draw( 2pt,   0pt) node{$-500$};
    \draw( 70pt,  0pt) node{$+250$};
    \draw( 105pt, 0pt) node{$+250$};
    
    \end{tikzpicture}
  \end{center}
\end{frame}


\begin{frame}{Communication}{Coefficient d'agglomération diminue rapidement}
  \hspace{-1cm}
  \begin{minipage}{0.47\textwidth}
    \begin{center}
      \includegraphics[width=1.23\textwidth]{img/network/cycloncluster.eps}
    \end{center}
  \end{minipage}
  \hfill
  \begin{minipage}{0.47\textwidth}
      \includegraphics[width=1.23\textwidth]{img/network/spraycluster.eps}
  \end{minipage}

  \vspace{0.5cm}

  \begin{itemize}
  \item \CYCLON configuré avec
    \begin{itemize}
    \item  $\ln(1000) \approx 7$ voisins et
    \item mélange de $3$ voisins.
    \end{itemize}
  \end{itemize}

\end{frame}


\begin{frame}{Communication}{Faible taux de doublons}
  \begin{center}
    \includegraphics[width=1\textwidth]{img/network/duplicates.eps}
  \end{center}
\end{frame}


\begin{frame}{Communication}{Cas de la diffusion de messages}

  \begin{center}
    \input{img/figdiffusion.tex}
  \end{center}
  
  \begin{center}
    \uncover<2->{\DARKBLUE{diffuse($msg_1$)}} \uncover<3->{\textcolor{termithgreen}{diffuse($msg_2$)}} \uncover<4->{\textcolor{termithorange}{$diffuse(msg_3)$}}
  \end{center}

  \begin{itemize}
  \item \CYCLON 
    \begin{enumerate}
    \item vue partielle de 30 voisins, fanout de $\ln(100)+1\approx 6$;
    \item vue partielle de 30 voisins, fanout de  $\ln(100)+3 \approx 8$.
    \end{enumerate}
  \item \SPRAY
    \begin{enumerate}
    \item vue partielle de $6\cdot\ln|\mathcal{N}|$ voisins,
      fanout de $\ln(|\mathcal{N}|)+1$;
    \item vue partielle de $6\cdot\ln|\mathcal{N}|$ voisins,
      fanout de $\ln(|\mathcal{N}|)+3$;
    \end{enumerate}
  \end{itemize}

\end{frame}


\begin{frame}{Communication}{Le taux d'erreur reste constant}
  \begin{center}
    \includegraphics[width=1\textwidth]{img/network/hardrate.eps}
  \end{center} 
\end{frame}


\begin{frame}{Communication}{Le pic de popularité est mieux géré}
  \begin{center}
    \includegraphics[width=1\textwidth]{img/network/peak.eps}
  \end{center} 
\end{frame}


\begin{frame}{Communication}{Conclusion}
  
  \begin{itemize}
  \item \SPRAY est un protocole d'échantillonnage aléatoire de pair adaptatif.
  \item \SPRAY est adapté au processus complexe d'établissement de connexion de
    WebRTC.
  \end{itemize}

  \vspace{1cm}

  \begin{itemize}
  \item Les protocoles construits au dessus de \SPRAY bénéficient de cette
    adaptativité.
  \end{itemize}

\end{frame}

\begin{frame}{Communication}{Perspective}

  \begin{block}{Les réseaux fusionnant préservent leurs propriétés}
    Soit $\mathcal{N}_1,\, \mathcal{N}_2,\, \ldots ,\, \mathcal{N}_k$ des réseaux
    de taille arbitraire. On a : \vspace{-5pt}
    \begin{equation}
      \sum\limits_{i = 1}^k |\mathcal{N}_i|\ln (|\mathcal{N}_i|) < (\sum\limits_{i = 1}^k |\mathcal{N}_i|)\ln{(\sum\limits_{i=1}^k |\mathcal{N}_i|)}
    \end{equation}
    Comment adapter le nombre d'arcs effectifs (à gauche) pour qu'il atteigne le
    nombre d'arcs requis (à droite)?
  \end{block}

  \begin{minipage}{0.325\textwidth}
    \includegraphics[width=1.2\textwidth]{img/graphA.png}
  \end{minipage}
  \begin{minipage}{0.325\textwidth}
    \includegraphics[width=1.2\textwidth]{img/graphB.png}
  \end{minipage}
  \begin{minipage}{0.325\textwidth}
    \includegraphics[width=1.2\textwidth]{img/graphC.png}
  \end{minipage}

\end{frame}


\begin{frame}{Communication}{Vues partielles adaptatives}

  \hspace{-1cm}
  \begin{minipage}{0.55\textwidth}
    \begin{itemize}
      \item \textbf{Chaque éditeur possède une copie locale du document;}
      \item \textbf{Chaque éditeur est connecté à d'autres éditeurs.}
      \vspace{0.5cm}
    \item Chaque caractère tapé est directement inséré dans la copie locale;
    \item La modification est disséminée à l'ensemble du réseau;
    \item Les éditeurs recevant la modification l'appliquent.
    \end{itemize}
  \end{minipage}
  \hfill
  \begin{minipage}{0.44\textwidth}
    \begin{center}
      \input{img/figenteringsessionstatic.tex}
    \end{center}
  \end{minipage}
  

  \vspace{1cm}
  \large
  \begin{itemize}
  \item [$\Rightarrow$] \textbf{taille de messages} $\times$ \textbf{nombre de messages}
  \end{itemize}

\end{frame}


\begin{frame}{\CRATE}{Experimentation}

  \begin{center}
    \includegraphics[width=1\textwidth]{img/editor/communication.eps}
  \end{center}

\end{frame}